name: CI

on:
  push:
    branches: [ master ]

jobs:
  main:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v2
      env: 
        MAIN_FILE: indian-passwords
        LENGTH_8_20_FILE: indian-passwords-length8-20
        LENGTH_8_20_SORTED_FILE: indian-passwords-length8-20-sorted

    - name: Pipeline
      run: |
        rm indian-passwords-length8-20 indian-passwords-length8-20-sorted
        sort indian-passwords > indian-passwords-sorted
        while read -r line; do chars=${#line}; if [[ $chars -ge 8 ]] && [[ $chars -le 20 ]]; then echo $line; fi; done < ${{ MAIN_FILE }} >> ${{ LENGTH_8_20_FILE }}
        sort ${{LENGTH_8_20_FILE}} > ${{ LENGTH_8_20_SORTED_FILE }}

    - name: Gitback
      run: | 
        git config --global user.email "ci@zxcv32.com"
        git config --global user.name "CI zxcV32"
        git remote add github "https://github.com/zxcV32/indian-wordlist.git"
        git add .
        git commit -m "Commit by Pipeline"
        git push github master
